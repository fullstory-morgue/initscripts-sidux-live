# shapi
# A shared shell api

shapi.dialog.setup (){
 if [ -z "$SHAPI_DIALOG" ] ; then
  # Determine which dialog to use in which situation:
  # Xdialog (in all other cases)
  SHAPI_DIALOG=Xdialog
  # kdialog (in case there is no console available and we are running KDE)
  pidof kdesktop >/dev/null && SHAPI_DIALOG=kdialog 
  # GNOME
  pidof gnome-panel >/dev/null && SHAPI_DIALOG=zenity 
  # dialog (in case there is a console available)
  SHAPI_GUIMODE=$(tty)
  ( echo $SHAPI_GUIMODE | grep /dev/tty[:digit:] >/dev/null ) && SHAPI_DIALOG=dialog
fi
}

# Simple Prompts
#shapi.dialog.yesno title text height width help default
#shapi.dialog.yesno.warning title text height width help default
#shapi.dialog.textinput title text height width init help default
#shapi.dialog.password title text height width default
#shapi.dialog.time title text height width [ hour minute second ]
#shapi.dialog.calendar title text height width [ day month year ]

# File/Directories
#shapi.dialog.fselect title height width help default
#shapi.dialog.dselect title height width help default

# Menus
#shapi.dialog.menu title text height width menu-height help default [ tag item ] ...
#shapi.dialog.menu.radio title text height width menu-height help default [ tag item status ] ...
#shapi.dialog.menu.check title text height width menu-height help default [ tag item status ] ...

# Feedback
#shapi.dialog.error title text height width help
#shapi.dialog.message title text height width help
shapi.msgbox(){
 shapi.dialog.setup
 case $SHAPI_DIALOG in
 zenity)
  SHAPI_DIALOG_ARG="--info --title=\"$1\" --text \"$2\""
  [ -n "$3" ] && SHAPI_DIALOG_ARG="$SHAPI_DIALOG_ARG --height=$3
  [ -n "$4" ] && SHAPI_DIALOG_ARG="$SHAPI_DIALOG_ARG --width=$4
  ;;
 kdialog)
  $SHAPI_DIALOG_ARG="--msgbox \"$2\" --caption \"Message\" --title \"$1\""
  ;;
 *)
  $SHAPI_DIALOG_ARG="--title \"$1\" --msgbox \"$2\"\" $3 $4"
  ;;
 esac
 $SHAPI_DIALOG $SHAPI_DIALOG_ARG
}

#shapi.dialog.message.bg title text height width help
#shapi.dialog.gauge title text height width help default
#shapi.dialog.watchfile title height width file
#shapi.dialog.watchfile.bg title height width file
#shapi.dialog.showfile title height width file

# Other dialogs
#shapi.dialog.form title text height width formheight [ label y x item y x flen ilen ] ...
#shapi.dialog.pause title text height width seconds

#shapi.su command

#shapi.var.load file
#shapi.var.write file [ varname ] ...
#shapi.var.update file [ varname value ] ...
